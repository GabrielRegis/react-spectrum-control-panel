{"remainingRequest":"/Users/gabrielregis/react-spectrum-control-panel/node_modules/thread-loader/dist/cjs.js??ref--7-1!/Users/gabrielregis/react-spectrum-control-panel/node_modules/babel-loader/lib/index.js??ref--7-2!/Users/gabrielregis/react-spectrum-control-panel/src/containers/views/Home/Sider/Menu.tsx","dependencies":[{"path":"/Users/gabrielregis/react-spectrum-control-panel/src/containers/views/Home/Sider/Menu.tsx","mtime":1560467078000},{"path":"/Users/gabrielregis/react-spectrum-control-panel/node_modules/cache-loader/dist/cjs.js","mtime":1561315137663},{"path":"/Users/gabrielregis/react-spectrum-control-panel/node_modules/thread-loader/dist/cjs.js","mtime":1561315143281},{"path":"/Users/gabrielregis/react-spectrum-control-panel/node_modules/babel-loader/lib/index.js","mtime":1561315137554}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM2Lm9iamVjdC5hc3NpZ24iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNy5zeW1ib2wuYXN5bmMtaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lczYuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCAiYW50ZC9saWIvaWNvbi9zdHlsZSI7CmltcG9ydCBfSWNvbiBmcm9tICJhbnRkL2xpYi9pY29uIjsKaW1wb3J0ICJhbnRkL2xpYi9tZW51L3N0eWxlIjsKaW1wb3J0IF9NZW51IGZyb20gImFudGQvbGliL21lbnUiOwoKdmFyIF9jbGFzcywgX2NsYXNzMiwgX3RlbXA7CgpmdW5jdGlvbiBfZXh0ZW5kcygpIHsgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQoKZnVuY3Rpb24gX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcih0YXJnZXQsIHByb3BlcnR5LCBkZWNvcmF0b3JzLCBkZXNjcmlwdG9yLCBjb250ZXh0KSB7IHZhciBkZXNjID0ge307IE9iamVjdC5rZXlzKGRlc2NyaXB0b3IpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBkZXNjW2tleV0gPSBkZXNjcmlwdG9yW2tleV07IH0pOyBkZXNjLmVudW1lcmFibGUgPSAhIWRlc2MuZW51bWVyYWJsZTsgZGVzYy5jb25maWd1cmFibGUgPSAhIWRlc2MuY29uZmlndXJhYmxlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjIHx8IGRlc2MuaW5pdGlhbGl6ZXIpIHsgZGVzYy53cml0YWJsZSA9IHRydWU7IH0gZGVzYyA9IGRlY29yYXRvcnMuc2xpY2UoKS5yZXZlcnNlKCkucmVkdWNlKGZ1bmN0aW9uIChkZXNjLCBkZWNvcmF0b3IpIHsgcmV0dXJuIGRlY29yYXRvcih0YXJnZXQsIHByb3BlcnR5LCBkZXNjKSB8fCBkZXNjOyB9LCBkZXNjKTsgaWYgKGNvbnRleHQgJiYgZGVzYy5pbml0aWFsaXplciAhPT0gdm9pZCAwKSB7IGRlc2MudmFsdWUgPSBkZXNjLmluaXRpYWxpemVyID8gZGVzYy5pbml0aWFsaXplci5jYWxsKGNvbnRleHQpIDogdm9pZCAwOyBkZXNjLmluaXRpYWxpemVyID0gdW5kZWZpbmVkOyB9IGlmIChkZXNjLmluaXRpYWxpemVyID09PSB2b2lkIDApIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHksIGRlc2MpOyBkZXNjID0gbnVsbDsgfSByZXR1cm4gZGVzYzsgfQoKaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnOwppbXBvcnQgeyBvYnNlcnZlciB9IGZyb20gJ21vYngtcmVhY3QnOwppbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gJ21vYngnOwppbXBvcnQgcGF0aFRvUmVnZXhwIGZyb20gJ3BhdGgtdG8tcmVnZXhwJzsKaW1wb3J0ICogYXMgc3R5bGVzIGZyb20gJy4vaW5kZXguc2Nzcyc7CmltcG9ydCB7IFJvb3RDb25zdW1lciB9IGZyb20gJ0BzaGFyZWQvQXBwL1Byb3ZpZGVyJzsKaW1wb3J0IHsgYXJyYXlUb1RyZWUsIHF1ZXJ5QXJyYXkgfSBmcm9tICdAdXRpbHMvaW5kZXgnOwppbXBvcnQgbWVudSBmcm9tICcuLy4uL21lbnUnOwp2YXIgU3ViTWVudSA9IF9NZW51LlN1Yk1lbnU7Cgp2YXIgU2lkZXJNZW51ID0gb2JzZXJ2ZXIoX2NsYXNzID0gKF9jbGFzczIgPSAoX3RlbXAgPSBjbGFzcyBTaWRlck1lbnUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQgewogIGNvbnN0cnVjdG9yKCkgewogICAgc3VwZXIoLi4uYXJndW1lbnRzKTsKICAgIHRoaXMubGV2ZWxNYXAgPSB7fTsKCiAgICB0aGlzLmdvdG8gPSAoX3JlZikgPT4gewogICAgICB2YXIga2V5ID0gX3JlZi5rZXk7CiAgICAgIHZhciBoaXN0b3J5ID0gdGhpcy5wcm9wcy5yb3V0ZXJTdG9yZS5oaXN0b3J5OwogICAgICB2YXIgc2VsZWN0ZWRNZW51ID0gbWVudS5maW5kKGl0ZW0gPT4gU3RyaW5nKGl0ZW0uaWQpID09PSBrZXkpOwoKICAgICAgaWYgKHNlbGVjdGVkTWVudSAmJiBzZWxlY3RlZE1lbnUucGF0aCAmJiBzZWxlY3RlZE1lbnUucGF0aCAhPT0gdGhpcy5jdXJyZW50Um91dGUpIHsKICAgICAgICBoaXN0b3J5LnB1c2goc2VsZWN0ZWRNZW51LnBhdGgpOwogICAgICB9CiAgICB9OwoKICAgIHRoaXMub25PcGVuQ2hhbmdlID0gb3BlbktleXMgPT4gewogICAgICB2YXIgX3RoaXMkcHJvcHMgPSB0aGlzLnByb3BzLAogICAgICAgICAgbmF2T3BlbktleXMgPSBfdGhpcyRwcm9wcy5uYXZPcGVuS2V5cywKICAgICAgICAgIHNldE9wZW5LZXlzID0gX3RoaXMkcHJvcHMuc2V0T3BlbktleXM7CiAgICAgIHZhciBsYXRlc3RPcGVuS2V5ID0gb3BlbktleXMuZmluZChrZXkgPT4gIW5hdk9wZW5LZXlzLmluY2x1ZGVzKGtleSkpOwogICAgICB2YXIgbGF0ZXN0Q2xvc2VLZXkgPSBuYXZPcGVuS2V5cy5maW5kKGtleSA9PiAhb3BlbktleXMuaW5jbHVkZXMoa2V5KSk7CiAgICAgIHZhciBuZXh0T3BlbktleXMgPSBbXTsKCiAgICAgIGlmIChsYXRlc3RPcGVuS2V5KSB7CiAgICAgICAgbmV4dE9wZW5LZXlzID0gdGhpcy5nZXRBbmNlc3RvcktleXMobGF0ZXN0T3BlbktleSkuY29uY2F0KGxhdGVzdE9wZW5LZXkpOwogICAgICB9CgogICAgICBpZiAobGF0ZXN0Q2xvc2VLZXkpIHsKICAgICAgICBuZXh0T3BlbktleXMgPSB0aGlzLmdldEFuY2VzdG9yS2V5cyhsYXRlc3RDbG9zZUtleSk7CiAgICAgIH0KCiAgICAgIHNldE9wZW5LZXlzKG5leHRPcGVuS2V5cyk7CiAgICB9OwoKICAgIHRoaXMuZ2V0UGF0aEFycmF5ID0gKGFycmF5LCBjdXJyZW50KSA9PiB7CiAgICAgIHZhciByZXN1bHQgPSBbU3RyaW5nKGN1cnJlbnQuaWQpXTsKCiAgICAgIHZhciBnZXRQYXRoID0gaXRlbSA9PiB7CiAgICAgICAgaWYgKGl0ZW0gJiYgaXRlbS5waWQpIHsKICAgICAgICAgIHJlc3VsdC51bnNoaWZ0KFN0cmluZyhpdGVtLnBpZCkpOwogICAgICAgICAgZ2V0UGF0aChxdWVyeUFycmF5KGFycmF5LCBTdHJpbmcoaXRlbS5waWQpLCAnaWQnKSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgZ2V0UGF0aChjdXJyZW50KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH07CgogICAgdGhpcy5nZXRBbmNlc3RvcktleXMgPSBrZXkgPT4gewogICAgICB2YXIgbWFwID0ge307CgogICAgICB2YXIgZ2V0UGFyZW50ID0gaW5kZXggPT4gewogICAgICAgIHZhciByZXN1bHQgPSBbU3RyaW5nKHRoaXMubGV2ZWxNYXBbaW5kZXhdKV07CgogICAgICAgIGlmICh0aGlzLmxldmVsTWFwW3Jlc3VsdFswXV0pIHsKICAgICAgICAgIHJlc3VsdC51bnNoaWZ0KGdldFBhcmVudChyZXN1bHRbMF0pWzBdKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH07CgogICAgICBmb3IgKHZhciBpbmRleCBpbiB0aGlzLmxldmVsTWFwKSB7CiAgICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy5sZXZlbE1hcCwgaW5kZXgpKSB7CiAgICAgICAgICBtYXBbaW5kZXhdID0gZ2V0UGFyZW50KGluZGV4KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBtYXBba2V5XSB8fCBbXTsKICAgIH07CgogICAgdGhpcy5nZXRNZW51cyA9IG1lbnVUcmVlID0+IHsKICAgICAgcmV0dXJuIG1lbnVUcmVlLm1hcChpdGVtID0+IHsKICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbikgewogICAgICAgICAgaWYgKGl0ZW0ucGlkKSB7CiAgICAgICAgICAgIHRoaXMubGV2ZWxNYXBbaXRlbS5pZF0gPSBpdGVtLnBpZDsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChTdWJNZW51LCB7CiAgICAgICAgICAgIGtleTogU3RyaW5nKGl0ZW0uaWQpLAogICAgICAgICAgICB0aXRsZTogUmVhY3QuY3JlYXRlRWxlbWVudCgic3BhbiIsIG51bGwsIGl0ZW0uaWNvbiAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KF9JY29uLCB7CiAgICAgICAgICAgICAgdHlwZTogaXRlbS5pY29uCiAgICAgICAgICAgIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgaXRlbS50aXRsZSkpCiAgICAgICAgICB9LCB0aGlzLmdldE1lbnVzKGl0ZW0uY2hpbGRyZW4pKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KF9NZW51Lkl0ZW0sIHsKICAgICAgICAgIGtleTogU3RyaW5nKGl0ZW0uaWQpCiAgICAgICAgfSwgaXRlbS5pY29uICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoX0ljb24sIHsKICAgICAgICAgIHR5cGU6IGl0ZW0uaWNvbgogICAgICAgIH0pLCBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCwgaXRlbS50aXRsZSkpOwogICAgICB9KTsKICAgIH07CiAgfQoKICBnZXQgY3VycmVudFJvdXRlKCkgewogICAgcmV0dXJuIHRoaXMucHJvcHMucm91dGVyU3RvcmUubG9jYXRpb24ucGF0aG5hbWU7CiAgfQoKICBnZXQgbWVudVRyZWUoKSB7CiAgICByZXR1cm4gYXJyYXlUb1RyZWUobWVudSwgJ2lkJywgJ3BpZCcpOwogIH0KCiAgZ2V0IG1lbnVQcm9wcygpIHsKICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLAogICAgICAgIHNpZGVCYXJDb2xsYXBzZWQgPSBfdGhpcyRwcm9wczIuc2lkZUJhckNvbGxhcHNlZCwKICAgICAgICBuYXZPcGVuS2V5cyA9IF90aGlzJHByb3BzMi5uYXZPcGVuS2V5czsKICAgIHJldHVybiAhc2lkZUJhckNvbGxhcHNlZCA/IHsKICAgICAgb25PcGVuQ2hhbmdlOiB0aGlzLm9uT3BlbkNoYW5nZSwKICAgICAgb3BlbktleXM6IG5hdk9wZW5LZXlzCiAgICB9IDoge307CiAgfQoKICByZW5kZXIoKSB7CiAgICB0aGlzLmxldmVsTWFwID0ge307CiAgICB2YXIgc2lkZUJhclRoZW1lID0gdGhpcy5wcm9wcy5zaWRlQmFyVGhlbWU7CiAgICB2YXIgbWVudUl0ZW1zID0gdGhpcy5nZXRNZW51cyh0aGlzLm1lbnVUcmVlKTsgLy8g5a+75om+6YCJ5Lit6Lev55SxCgogICAgdmFyIGN1cnJlbnRNZW51ID0gbnVsbDsKICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlOwogICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkOwoKICAgIHRyeSB7CiAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IG1lbnVbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7CiAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgaWYgKGl0ZW0ucGF0aCAmJiBwYXRoVG9SZWdleHAoaXRlbS5wYXRoKS5leGVjKHRoaXMuY3VycmVudFJvdXRlKSkgewogICAgICAgICAgY3VycmVudE1lbnUgPSBpdGVtOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlOwogICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjsKICAgIH0gZmluYWxseSB7CiAgICAgIHRyeSB7CiAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpOwogICAgICAgIH0KICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHZhciBzZWxlY3RlZEtleXMgPSBudWxsOwoKICAgIGlmIChjdXJyZW50TWVudSkgewogICAgICBzZWxlY3RlZEtleXMgPSB0aGlzLmdldFBhdGhBcnJheShtZW51LCBjdXJyZW50TWVudSk7CiAgICB9CgogICAgaWYgKCFzZWxlY3RlZEtleXMpIHsKICAgICAgc2VsZWN0ZWRLZXlzID0gWycxJ107CiAgICB9CgogICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoX01lbnUsIF9leHRlbmRzKHsKICAgICAgY2xhc3NOYW1lOiBzdHlsZXMubWVudSwKICAgICAgdGhlbWU6IHNpZGVCYXJUaGVtZSwKICAgICAgbW9kZTogImlubGluZSIsCiAgICAgIHNlbGVjdGVkS2V5czogc2VsZWN0ZWRLZXlzLAogICAgICBvbkNsaWNrOiB0aGlzLmdvdG8KICAgIH0sIHRoaXMubWVudVByb3BzKSwgbWVudUl0ZW1zKTsKICB9Cgp9LCBfdGVtcCksIChfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKF9jbGFzczIucHJvdG90eXBlLCAiY3VycmVudFJvdXRlIiwgW2NvbXB1dGVkXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MyLnByb3RvdHlwZSwgImN1cnJlbnRSb3V0ZSIpLCBfY2xhc3MyLnByb3RvdHlwZSksIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzMi5wcm90b3R5cGUsICJtZW51VHJlZSIsIFtjb21wdXRlZF0sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoX2NsYXNzMi5wcm90b3R5cGUsICJtZW51VHJlZSIpLCBfY2xhc3MyLnByb3RvdHlwZSksIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzMi5wcm90b3R5cGUsICJtZW51UHJvcHMiLCBbY29tcHV0ZWRdLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF9jbGFzczIucHJvdG90eXBlLCAibWVudVByb3BzIiksIF9jbGFzczIucHJvdG90eXBlKSksIF9jbGFzczIpKSB8fCBfY2xhc3M7CgpmdW5jdGlvbiBXcmFwcGVyKCkgewogIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFJvb3RDb25zdW1lciwgbnVsbCwgKF9yZWYyKSA9PiB7CiAgICB2YXIgcm91dGVyU3RvcmUgPSBfcmVmMi5yb3V0ZXJTdG9yZSwKICAgICAgICBhdXRoU3RvcmUgPSBfcmVmMi5hdXRoU3RvcmUsCiAgICAgICAgZ2xvYmFsU3RvcmUgPSBfcmVmMi5nbG9iYWxTdG9yZTsKICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFNpZGVyTWVudSwgewogICAgICByb3V0ZXJTdG9yZTogcm91dGVyU3RvcmUsCiAgICAgIHVzZXJJbmZvOiBhdXRoU3RvcmUudXNlckluZm8sCiAgICAgIHNpZGVCYXJDb2xsYXBzZWQ6IGdsb2JhbFN0b3JlLnNpZGVCYXJDb2xsYXBzZWQsCiAgICAgIHNpZGVCYXJUaGVtZTogZ2xvYmFsU3RvcmUuc2lkZUJhclRoZW1lLAogICAgICBuYXZPcGVuS2V5czogZ2xvYmFsU3RvcmUubmF2T3BlbktleXMsCiAgICAgIHNldE9wZW5LZXlzOiBnbG9iYWxTdG9yZS5zZXRPcGVuS2V5cwogICAgfSk7CiAgfSk7Cn0KCmV4cG9ydCBkZWZhdWx0IFdyYXBwZXI7"},{"version":3,"sources":["/Users/gabrielregis/react-spectrum-control-panel/src/containers/views/Home/Sider/Menu.tsx"],"names":["React","observer","computed","pathToRegexp","styles","RootConsumer","arrayToTree","queryArray","menu","SubMenu","SiderMenu","Component","levelMap","goto","key","history","props","routerStore","selectedMenu","find","item","String","id","path","currentRoute","push","onOpenChange","openKeys","navOpenKeys","setOpenKeys","latestOpenKey","includes","latestCloseKey","nextOpenKeys","getAncestorKeys","concat","getPathArray","array","current","result","getPath","pid","unshift","map","getParent","index","hasOwnProperty","call","getMenus","menuTree","children","icon","title","location","pathname","menuProps","sideBarCollapsed","render","sideBarTheme","menuItems","currentMenu","exec","selectedKeys","Wrapper","authStore","globalStore","userInfo"],"mappings":"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","sourcesContent":["import * as React from 'react'\nimport { observer } from 'mobx-react'\nimport { computed } from 'mobx'\nimport { Menu, Icon } from 'antd'\nimport pathToRegexp from 'path-to-regexp'\n\nimport * as styles from './index.scss'\nimport { RootConsumer } from '@shared/App/Provider'\nimport { arrayToTree, queryArray } from '@utils/index'\nimport menu, { IMenu, IMenuInTree } from './../menu'\n\nconst { SubMenu } = Menu\n\ninterface IProps {\n    sideBarCollapsed: boolean\n    sideBarTheme: IGlobalStore.SideBarTheme\n    navOpenKeys: string[]\n    setOpenKeys: (openKeys: string[]) => void\n    userInfo: IAuthStore.UserInfo\n    routerStore: RouterStore\n}\n\n@observer\nclass SiderMenu extends React.Component<IProps> {\n    // 打开的菜单层级记录\n    private levelMap: NumberObject = {}\n\n    @computed\n    get currentRoute() {\n        return this.props.routerStore.location.pathname\n    }\n\n    @computed\n    get menuTree() {\n        return arrayToTree<IMenuInTree>(menu, 'id', 'pid')\n    }\n\n    @computed\n    get menuProps() {\n        const { sideBarCollapsed, navOpenKeys } = this.props\n        return !sideBarCollapsed\n            ? {\n                  onOpenChange: this.onOpenChange,\n                  openKeys: navOpenKeys\n              }\n            : {}\n    }\n\n    goto = ({ key }: { key: string }) => {\n        const { history } = this.props.routerStore\n        const selectedMenu = menu.find(item => String(item.id) === key)\n        if (selectedMenu && selectedMenu.path && selectedMenu.path !== this.currentRoute) {\n            history.push(selectedMenu.path)\n        }\n    }\n\n    onOpenChange = (openKeys: string[]): void => {\n        const { navOpenKeys, setOpenKeys } = this.props\n        const latestOpenKey = openKeys.find(key => !navOpenKeys.includes(key))\n        const latestCloseKey = navOpenKeys.find(key => !openKeys.includes(key))\n        let nextOpenKeys = []\n        if (latestOpenKey) {\n            nextOpenKeys = this.getAncestorKeys(latestOpenKey).concat(latestOpenKey)\n        }\n        if (latestCloseKey) {\n            nextOpenKeys = this.getAncestorKeys(latestCloseKey)\n        }\n        setOpenKeys(nextOpenKeys)\n    }\n\n    getPathArray = (array: IMenu[], current: IMenu): string[] => {\n        const result = [String(current.id)]\n        const getPath = (item: IMenu): void => {\n            if (item && item.pid) {\n                result.unshift(String(item.pid))\n                getPath(queryArray(array, String(item.pid), 'id'))\n            }\n        }\n        getPath(current)\n        return result\n    }\n\n    // 保持选中\n    getAncestorKeys = (key: string): string[] => {\n        const map = {}\n        const getParent = index => {\n            const result = [String(this.levelMap[index])]\n            if (this.levelMap[result[0]]) {\n                result.unshift(getParent(result[0])[0])\n            }\n            return result\n        }\n        for (const index in this.levelMap) {\n            if ({}.hasOwnProperty.call(this.levelMap, index)) {\n                map[index] = getParent(index)\n            }\n        }\n        return map[key] || []\n    }\n\n    // 递归生成菜单\n    getMenus = (menuTree: IMenuInTree[]) => {\n        return menuTree.map(item => {\n            if (item.children) {\n                if (item.pid) {\n                    this.levelMap[item.id] = item.pid\n                }\n                return (\n                    <SubMenu\n                        key={String(item.id)}\n                        title={\n                            <span>\n                                {item.icon && <Icon type={item.icon} />}\n                                <span>{item.title}</span>\n                            </span>\n                        }\n                    >\n                        {this.getMenus(item.children)}\n                    </SubMenu>\n                )\n            }\n            return (\n                <Menu.Item key={String(item.id)}>\n                    {item.icon && <Icon type={item.icon} />}\n                    <span>{item.title}</span>\n                </Menu.Item>\n            )\n        })\n    }\n\n    render() {\n        this.levelMap = {}\n        const { sideBarTheme } = this.props\n        const menuItems = this.getMenus(this.menuTree)\n        // 寻找选中路由\n        let currentMenu: IMenu = null\n        for (const item of menu) {\n            if (item.path && pathToRegexp(item.path).exec(this.currentRoute)) {\n                currentMenu = item\n                break\n            }\n        }\n        let selectedKeys: string[] = null\n        if (currentMenu) {\n            selectedKeys = this.getPathArray(menu, currentMenu)\n        }\n        if (!selectedKeys) {\n            selectedKeys = ['1']\n        }\n        return (\n            <Menu\n                className={styles.menu}\n                theme={sideBarTheme}\n                mode=\"inline\"\n                selectedKeys={selectedKeys}\n                onClick={this.goto}\n                {...this.menuProps}\n            >\n                {menuItems}\n            </Menu>\n        )\n    }\n}\n\nfunction Wrapper() {\n    return (\n        <RootConsumer>\n            {({ routerStore, authStore, globalStore }) => (\n                <SiderMenu\n                    routerStore={routerStore}\n                    userInfo={authStore.userInfo}\n                    sideBarCollapsed={globalStore.sideBarCollapsed}\n                    sideBarTheme={globalStore.sideBarTheme}\n                    navOpenKeys={globalStore.navOpenKeys}\n                    setOpenKeys={globalStore.setOpenKeys}\n                />\n            )}\n        </RootConsumer>\n    )\n}\n\nexport default Wrapper\n"]}]}