{"remainingRequest":"/Users/gabrielregis/react-spectrum-control-panel/node_modules/thread-loader/dist/cjs.js??ref--7-1!/Users/gabrielregis/react-spectrum-control-panel/node_modules/babel-loader/lib/index.js??ref--7-2!/Users/gabrielregis/react-spectrum-control-panel/src/containers/shared/App/IntlWrapper.tsx","dependencies":[{"path":"/Users/gabrielregis/react-spectrum-control-panel/src/containers/shared/App/IntlWrapper.tsx","mtime":1560467078000},{"path":"/Users/gabrielregis/react-spectrum-control-panel/node_modules/cache-loader/dist/cjs.js","mtime":1561315137663},{"path":"/Users/gabrielregis/react-spectrum-control-panel/node_modules/thread-loader/dist/cjs.js","mtime":1561315143281},{"path":"/Users/gabrielregis/react-spectrum-control-panel/node_modules/babel-loader/lib/index.js","mtime":1561315137554}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3LnN5bWJvbC5hc3luYy1pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5zeW1ib2wiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLml0ZXJhYmxlIjsKaW1wb3J0ICJhbnRkL2xpYi9sb2NhbGUtcHJvdmlkZXIvc3R5bGUiOwppbXBvcnQgX0xvY2FsZVByb3ZpZGVyIGZyb20gImFudGQvbGliL2xvY2FsZS1wcm92aWRlciI7CmltcG9ydCAiYW50ZC9saWIvc2VsZWN0L3N0eWxlIjsKaW1wb3J0IF9TZWxlY3QgZnJvbSAiYW50ZC9saWIvc2VsZWN0IjsKCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9CgpmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIik7IH0KCmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbInJldHVybiJdICE9IG51bGwpIF9pWyJyZXR1cm4iXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfQoKaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnOwppbXBvcnQgaW50bCBmcm9tICdyZWFjdC1pbnRsLXVuaXZlcnNhbCc7CmltcG9ydCB7IGZpbmQgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgKiBhcyBzdHlsZXMgZnJvbSAnLi9pbmRleC5zY3NzJzsKaW1wb3J0IHsgdXNlT25Nb3VudCB9IGZyb20gJ0B1dGlscy9yZWFjdEV4dCc7CmltcG9ydCB7IHNldENvb2tpZSB9IGZyb20gJ0B1dGlscy9pbmRleCc7CmltcG9ydCB7IENPT0tJRV9LRVlTIH0gZnJvbSAnQGNvbnN0YW50cy9pbmRleCc7CmltcG9ydCBQYWdlTG9hZGluZyBmcm9tICdAY29tcG9uZW50cy9QYWdlTG9hZGluZyc7CmltcG9ydCB7IFNVUFBPRVJfTE9DQUxFUywgTE9DQUxFU19LRVlTLCBnZXRMb2NhbGVMb2FkZXIgfSBmcm9tICdAbG9jYWxlcy9sb2FkZXInOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBJbnRsV3JhcHBlcihfcmVmKSB7CiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjsKCiAgdmFyIF9SZWFjdCR1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlKCcnKSwKICAgICAgX1JlYWN0JHVzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZSwgMiksCiAgICAgIGN1cnJlbnRMb2NhbGUgPSBfUmVhY3QkdXNlU3RhdGUyWzBdLAogICAgICBzZXRDdXJyZW50TG9jYWxlID0gX1JlYWN0JHVzZVN0YXRlMlsxXTsKCiAgdmFyIF9SZWFjdCR1c2VTdGF0ZTMgPSBSZWFjdC51c2VTdGF0ZShudWxsKSwKICAgICAgX1JlYWN0JHVzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZTMsIDIpLAogICAgICBhbnRkTG9jYWxlRGF0YSA9IF9SZWFjdCR1c2VTdGF0ZTRbMF0sCiAgICAgIHNldEFudGRMb2NhbGVEYXRhID0gX1JlYWN0JHVzZVN0YXRlNFsxXTsKCiAgZnVuY3Rpb24gbG9hZExvY2FsZXMoKSB7CiAgICB2YXIgdGFyZ2V0TG9jYWxlID0gaW50bC5kZXRlcm1pbmVMb2NhbGUoewogICAgICBjb29raWVMb2NhbGVLZXk6IENPT0tJRV9LRVlTLkxBTkcKICAgIH0pOyAvLyBkZWZhdWx0IGlzIEVuZ2xpc2gKCiAgICBpZiAoIWZpbmQoU1VQUE9FUl9MT0NBTEVTLCB7CiAgICAgIHZhbHVlOiB0YXJnZXRMb2NhbGUKICAgIH0pKSB7CiAgICAgIHRhcmdldExvY2FsZSA9IExPQ0FMRVNfS0VZUy5FTl9VUzsKICAgIH0KCiAgICBnZXRMb2NhbGVMb2FkZXIodGFyZ2V0TG9jYWxlKS50aGVuKHJlcyA9PiB7CiAgICAgIGludGwuaW5pdCh7CiAgICAgICAgY3VycmVudExvY2FsZTogdGFyZ2V0TG9jYWxlLAogICAgICAgIGxvY2FsZXM6IHsKICAgICAgICAgIFt0YXJnZXRMb2NhbGVdOiByZXMubG9jYWxlRGF0YQogICAgICAgIH0KICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgc2V0Q3VycmVudExvY2FsZSh0YXJnZXRMb2NhbGUpOwogICAgICAgIHNldEFudGRMb2NhbGVEYXRhKHJlcy5hbnRkTG9jYWxlRGF0YSk7CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBvblNlbGVjdExvY2FsZSh2YWwpIHsKICAgIHNldENvb2tpZShDT09LSUVfS0VZUy5MQU5HLCB2YWwpOwogICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgfQoKICB1c2VPbk1vdW50KGxvYWRMb2NhbGVzKTsKCiAgaWYgKCFjdXJyZW50TG9jYWxlKSB7CiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChQYWdlTG9hZGluZywgbnVsbCk7CiAgfQoKICB2YXIgc2VsZWN0TGFuZ3VhZ2UgPSBSZWFjdC5jcmVhdGVFbGVtZW50KF9TZWxlY3QsIHsKICAgIGNsYXNzTmFtZTogc3R5bGVzLmludGxTZWxlY3QsCiAgICBvbkNoYW5nZTogb25TZWxlY3RMb2NhbGUsCiAgICB2YWx1ZTogY3VycmVudExvY2FsZQogIH0sIFNVUFBPRVJfTE9DQUxFUy5tYXAobCA9PiBSZWFjdC5jcmVhdGVFbGVtZW50KF9TZWxlY3QuT3B0aW9uLCB7CiAgICBrZXk6IGwudmFsdWUsCiAgICB2YWx1ZTogbC52YWx1ZQogIH0sIGwubmFtZSkpKTsKICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChfTG9jYWxlUHJvdmlkZXIsIHsKICAgIGxvY2FsZTogYW50ZExvY2FsZURhdGEKICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBzZWxlY3RMYW5ndWFnZSwgY2hpbGRyZW4pKTsKfQ=="},{"version":3,"sources":["/Users/gabrielregis/react-spectrum-control-panel/src/containers/shared/App/IntlWrapper.tsx"],"names":["React","intl","find","styles","useOnMount","setCookie","COOKIE_KEYS","PageLoading","SUPPOER_LOCALES","LOCALES_KEYS","getLocaleLoader","IntlWrapper","children","useState","currentLocale","setCurrentLocale","antdLocaleData","setAntdLocaleData","loadLocales","targetLocale","determineLocale","cookieLocaleKey","LANG","value","EN_US","then","res","init","locales","localeData","onSelectLocale","val","location","reload","selectLanguage","intlSelect","map","l","name"],"mappings":";;;;;;;;;;;;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,SAASC,IAAT,QAAqB,QAArB;AAIA,OAAO,KAAKC,MAAZ,MAAwB,cAAxB;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,SAASC,eAAT,EAA0BC,YAA1B,EAAwCC,eAAxC,QAA+D,iBAA/D;AAMA,eAAe,SAASC,WAAT,OAA2C;AAAA,MAApBC,QAAoB,QAApBA,QAAoB;;AAAA,wBACZZ,KAAK,CAACa,QAAN,CAAe,EAAf,CADY;AAAA;AAAA,MAC/CC,aAD+C;AAAA,MAChCC,gBADgC;;AAAA,yBAEVf,KAAK,CAACa,QAAN,CAAuB,IAAvB,CAFU;AAAA;AAAA,MAE/CG,cAF+C;AAAA,MAE/BC,iBAF+B;;AAItD,WAASC,WAAT,GAAuB;AACnB,QAAIC,YAAY,GAAGlB,IAAI,CAACmB,eAAL,CAAqB;AAAEC,MAAAA,eAAe,EAAEf,WAAW,CAACgB;AAA/B,KAArB,CAAnB,CADmB,CAEnB;;AACA,QAAI,CAACpB,IAAI,CAACM,eAAD,EAAkB;AAAEe,MAAAA,KAAK,EAAEJ;AAAT,KAAlB,CAAT,EAAqD;AACjDA,MAAAA,YAAY,GAAGV,YAAY,CAACe,KAA5B;AACH;;AACDd,IAAAA,eAAe,CAACS,YAAD,CAAf,CAA8BM,IAA9B,CAAmCC,GAAG,IAAI;AACtCzB,MAAAA,IAAI,CAAC0B,IAAL,CAAU;AAAEb,QAAAA,aAAa,EAAEK,YAAjB;AAA+BS,QAAAA,OAAO,EAAE;AAAE,WAACT,YAAD,GAAgBO,GAAG,CAACG;AAAtB;AAAxC,OAAV,EAAwFJ,IAAxF,CAA6F,MAAM;AAC/FV,QAAAA,gBAAgB,CAACI,YAAD,CAAhB;AACAF,QAAAA,iBAAiB,CAACS,GAAG,CAACV,cAAL,CAAjB;AACH,OAHD;AAIH,KALD;AAMH;;AAED,WAASc,cAAT,CAAwBC,GAAxB,EAAqC;AACjC1B,IAAAA,SAAS,CAACC,WAAW,CAACgB,IAAb,EAAmBS,GAAnB,CAAT;AACAC,IAAAA,QAAQ,CAACC,MAAT;AACH;;AAED7B,EAAAA,UAAU,CAACc,WAAD,CAAV;;AAEA,MAAI,CAACJ,aAAL,EAAoB;AAChB,WAAO,oBAAC,WAAD,OAAP;AACH;;AACD,MAAMoB,cAAc,GAChB;AAAQ,IAAA,SAAS,EAAE/B,MAAM,CAACgC,UAA1B;AAAsC,IAAA,QAAQ,EAAEL,cAAhD;AAAgE,IAAA,KAAK,EAAEhB;AAAvE,KACKN,eAAe,CAAC4B,GAAhB,CAAoBC,CAAC,IAClB,4BAAQ,MAAR;AAAe,IAAA,GAAG,EAAEA,CAAC,CAACd,KAAtB;AAA6B,IAAA,KAAK,EAAEc,CAAC,CAACd;AAAtC,KACKc,CAAC,CAACC,IADP,CADH,CADL,CADJ;AASA,SACI;AAAgB,IAAA,MAAM,EAAEtB;AAAxB,KACI,oBAAC,KAAD,CAAO,QAAP,QACKkB,cADL,EAEKtB,QAFL,CADJ,CADJ;AAQH","sourcesContent":["import * as React from 'react'\nimport intl from 'react-intl-universal'\nimport { find } from 'lodash'\nimport { Select, LocaleProvider } from 'antd'\nimport { Locale } from 'antd/lib/locale-provider'\n\nimport * as styles from './index.scss'\nimport { useOnMount } from '@utils/reactExt'\nimport { setCookie } from '@utils/index'\nimport { COOKIE_KEYS } from '@constants/index'\nimport PageLoading from '@components/PageLoading'\nimport { SUPPOER_LOCALES, LOCALES_KEYS, getLocaleLoader } from '@locales/loader'\n\ninterface IProps {\n    children?: React.ReactNode\n}\n\nexport default function IntlWrapper({ children }: IProps) {\n    const [currentLocale, setCurrentLocale] = React.useState('')\n    const [antdLocaleData, setAntdLocaleData] = React.useState<Locale>(null)\n\n    function loadLocales() {\n        let targetLocale = intl.determineLocale({ cookieLocaleKey: COOKIE_KEYS.LANG }) as LOCALES_KEYS\n        // default is English\n        if (!find(SUPPOER_LOCALES, { value: targetLocale })) {\n            targetLocale = LOCALES_KEYS.EN_US\n        }\n        getLocaleLoader(targetLocale).then(res => {\n            intl.init({ currentLocale: targetLocale, locales: { [targetLocale]: res.localeData } }).then(() => {\n                setCurrentLocale(targetLocale)\n                setAntdLocaleData(res.antdLocaleData)\n            })\n        })\n    }\n\n    function onSelectLocale(val: string) {\n        setCookie(COOKIE_KEYS.LANG, val)\n        location.reload()\n    }\n\n    useOnMount(loadLocales)\n\n    if (!currentLocale) {\n        return <PageLoading />\n    }\n    const selectLanguage = (\n        <Select className={styles.intlSelect} onChange={onSelectLocale} value={currentLocale}>\n            {SUPPOER_LOCALES.map(l => (\n                <Select.Option key={l.value} value={l.value}>\n                    {l.name}\n                </Select.Option>\n            ))}\n        </Select>\n    )\n    return (\n        <LocaleProvider locale={antdLocaleData}>\n            <React.Fragment>\n                {selectLanguage}\n                {children}\n            </React.Fragment>\n        </LocaleProvider>\n    )\n}\n"]}]}